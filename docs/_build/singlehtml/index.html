
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>make_gtfs 1.0.0 documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="index.html#document-index">make_gtfs 1.0.0 documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html#document-index">Table Of Contents</a></h3>
  <ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-modules">Module main</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#module-make_gtfs.cli">Module cli</a></li>
</ul>

        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="make-gtfs-version-documentation">
<h1>Make GTFS 1.0.0 documentation<a class="headerlink" href="#make-gtfs-version-documentation" title="Permalink to this headline">¶</a></h1>
<p>Contents:</p>
<div class="toctree-wrapper compound">
<span id="document-modules"></span><div class="section" id="module-make_gtfs.main">
<span id="module-main"></span><h2>Module main<a class="headerlink" href="#module-make_gtfs.main" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="make_gtfs.main.ProtoFeed">
<em class="property">class </em><code class="descclassname">make_gtfs.main.</code><code class="descname">ProtoFeed</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#make_gtfs.main.ProtoFeed" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An ProtoFeed instance simply holds the source data
from which to build a GTFS feed.</p>
<p>Attributes are</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">service_windows</span></code>: DataFrame</li>
<li><code class="docutils literal notranslate"><span class="pre">frequencies</span></code>: DataFrame; has speeds filled in</li>
<li><code class="docutils literal notranslate"><span class="pre">meta</span></code>: DataFrame</li>
<li><code class="docutils literal notranslate"><span class="pre">shapes</span></code>: dictionary</li>
</ul>
<p>These are built from the required source files located at the
given directory path (string or Path object):</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">service_windows.csv</span></code></dt>
<dd>This is a CSV file containing service window information.
A <em>service window</em> is a time interval and a set of days of the
week during which all routes have constant service frequency,
e.g. Saturday and Sunday 07:00 to 09:00.
The CSV file contains the columns<ul class="last">
<li><code class="docutils literal notranslate"><span class="pre">service_window_id</span></code> (required): String. A unique identifier
for a service window</li>
<li><code class="docutils literal notranslate"><span class="pre">start_time</span></code>, <code class="docutils literal notranslate"><span class="pre">end_time</span></code> (required): Strings. The start
and end times of the service window in HH:MM:SS format where
the hour is less than 24</li>
<li><code class="docutils literal notranslate"><span class="pre">monday</span></code>, <code class="docutils literal notranslate"><span class="pre">tuesday</span></code>, <code class="docutils literal notranslate"><span class="pre">wednesday</span></code>, <code class="docutils literal notranslate"><span class="pre">thursday</span></code>,
<code class="docutils literal notranslate"><span class="pre">friday</span></code>, <code class="docutils literal notranslate"><span class="pre">saturday</span></code>, <code class="docutils literal notranslate"><span class="pre">sunday</span></code> (required): Integer 0
or 1. Indicates whether the service is active on the given day
(1) or not (0)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">frequencies.csv</span></code></dt>
<dd>This is a CSV file containing route frequency information.
The CSV file contains the columns<ul class="last">
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">route_short_name</span></code> (required): String. A unique short name</dt>
<dd>for the route, e.g. ‘51X’</dd>
</dl>
</li>
<li><code class="docutils literal notranslate"><span class="pre">route_desc</span></code> (optional): String. A description of the route</li>
<li><code class="docutils literal notranslate"><span class="pre">route_type</span></code> (required): Integer. The
<a class="reference external" href="https://developers.google.com/transit/gtfs/reference/#routestxt">GTFS type of the route</a></li>
<li><code class="docutils literal notranslate"><span class="pre">service_window_id</span></code> (required): String. A service window ID
for the route taken from the file <code class="docutils literal notranslate"><span class="pre">service_windows.csv</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">direction</span></code> (required): Integer 0, 1, or 2. Indicates
whether the route travels in GTFS direction 0, GTFS direction
1, or in both directions.
In the latter case, trips will be created that travel in both
directions along the route’s path, each direction operating at
the given frequency.  Otherwise, trips will be created that
travel in only the given direction.</li>
<li><code class="docutils literal notranslate"><span class="pre">frequency</span></code> (required): Integer. The frequency of the route
during the service window in vehicles per hour.</li>
<li><code class="docutils literal notranslate"><span class="pre">speed</span></code> (optional): Float. The speed of the route in
kilometers per hour</li>
<li><code class="docutils literal notranslate"><span class="pre">shape_id</span></code> (required): String. Shape ID in
<code class="docutils literal notranslate"><span class="pre">shapes.geojson</span></code> that corresponds to the linestring of the
(route, direction, service window) tuple.
In particular different directions and service windows for the
same route could have different shapes.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">meta.csv</span></code></dt>
<dd>This is a CSV file containing network metadata.
The CSV file contains the columns<ul class="last">
<li><code class="docutils literal notranslate"><span class="pre">agency_name</span></code> (required): String. The name of the transport
agency</li>
<li><code class="docutils literal notranslate"><span class="pre">agency_url</span></code> (required): String. A fully qualified URL for
the transport agency</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">agency_timezone</span></code> (required): String. Timezone where the</dt>
<dd>transit agency is located. Timezone names never contain the
space character but may contain an underscore. Refer to
<a class="reference external" href="http://en.wikipedia.org/wiki/List_of_tz_zones">http://en.wikipedia.org/wiki/List_of_tz_zones</a> for a list of valid values</dd>
</dl>
</li>
<li><code class="docutils literal notranslate"><span class="pre">start_date</span></code>, <code class="docutils literal notranslate"><span class="pre">end_date</span></code> (required): Strings. The start
and end dates for which all this network information is valid
formated as YYYYMMDD strings</li>
<li><code class="docutils literal notranslate"><span class="pre">default_route_speed</span></code> (required): Float. Default speed in
kilometers per hour to assign to routes with no <code class="docutils literal notranslate"><span class="pre">speed</span></code>
entry in the file <code class="docutils literal notranslate"><span class="pre">routes.csv</span></code></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">shapes.geojson</span></code></dt>
<dd>This is a GeoJSON file containing route shapes.
The file consists of one feature collection of LineString
features, where each feature’s properties contains at least the
attribute <code class="docutils literal notranslate"><span class="pre">shape_id</span></code>, which links the route’s shape to the
route’s information in <code class="docutils literal notranslate"><span class="pre">routes.csv</span></code>.</dd>
</dl>
</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="make_gtfs.main.build_agency">
<code class="descclassname">make_gtfs.main.</code><code class="descname">build_agency</code><span class="sig-paren">(</span><em>pfeed</em><span class="sig-paren">)</span><a class="headerlink" href="#make_gtfs.main.build_agency" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a ProtoFeed, return a DataFrame representing <code class="docutils literal notranslate"><span class="pre">agency.txt</span></code></p>
</dd></dl>

<dl class="function">
<dt id="make_gtfs.main.build_calendar_etc">
<code class="descclassname">make_gtfs.main.</code><code class="descname">build_calendar_etc</code><span class="sig-paren">(</span><em>pfeed</em><span class="sig-paren">)</span><a class="headerlink" href="#make_gtfs.main.build_calendar_etc" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a ProtoFeed, return a DataFrame representing <code class="docutils literal notranslate"><span class="pre">calendar.txt</span></code>
and a dictionary of the form &lt;service window ID&gt; -&gt; &lt;service ID&gt;,
respectively.</p>
</dd></dl>

<dl class="function">
<dt id="make_gtfs.main.build_feed">
<code class="descclassname">make_gtfs.main.</code><code class="descname">build_feed</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#make_gtfs.main.build_feed" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a path (string or Path object) to a directory of source files
from which to build a ProtoFeed, build and return the corresponding
GTFSTK Feed.
Distance units are kilometers.</p>
</dd></dl>

<dl class="function">
<dt id="make_gtfs.main.build_linestring_by_shape">
<code class="descclassname">make_gtfs.main.</code><code class="descname">build_linestring_by_shape</code><span class="sig-paren">(</span><em>pfeed</em>, <em>*</em>, <em>use_utm=False</em><span class="sig-paren">)</span><a class="headerlink" href="#make_gtfs.main.build_linestring_by_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a ProtoFeed, return a dictionary of the form
&lt;shape ID&gt; -&gt; &lt;Shapely linestring of shape&gt;.
Only include shape IDs that occur in both <code class="docutils literal notranslate"><span class="pre">pfeed.frequencies</span></code>
and <code class="docutils literal notranslate"><span class="pre">pfeed.proto_shapes</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">use_utm</span></code>, then return each linestring in in UTM coordinates.
Otherwise, return each linestring in WGS84 longitude-latitude
coordinates.</p>
</dd></dl>

<dl class="function">
<dt id="make_gtfs.main.build_routes">
<code class="descclassname">make_gtfs.main.</code><code class="descname">build_routes</code><span class="sig-paren">(</span><em>pfeed</em><span class="sig-paren">)</span><a class="headerlink" href="#make_gtfs.main.build_routes" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a ProtoFeed, return a DataFrame representing <code class="docutils literal notranslate"><span class="pre">routes.txt</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="make_gtfs.main.build_shapes">
<code class="descclassname">make_gtfs.main.</code><code class="descname">build_shapes</code><span class="sig-paren">(</span><em>pfeed</em><span class="sig-paren">)</span><a class="headerlink" href="#make_gtfs.main.build_shapes" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a ProtoFeed, return DataFrame representing <code class="docutils literal notranslate"><span class="pre">shapes.txt</span></code>.
Only include shape IDs that occur in both <code class="docutils literal notranslate"><span class="pre">pfeed.frequencies</span></code>
and <code class="docutils literal notranslate"><span class="pre">pfeed.proto_shapes</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="make_gtfs.main.build_stop_times">
<code class="descclassname">make_gtfs.main.</code><code class="descname">build_stop_times</code><span class="sig-paren">(</span><em>pfeed</em>, <em>routes</em>, <em>shapes</em>, <em>stops</em>, <em>trips</em><span class="sig-paren">)</span><a class="headerlink" href="#make_gtfs.main.build_stop_times" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a ProtoFeed and its corresponding routes (DataFrame),
shapes (DataFrame), stops (DataFrame), trips (DataFrame),
return DataFrame representing <code class="docutils literal notranslate"><span class="pre">stop_times.txt</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="make_gtfs.main.build_stops">
<code class="descclassname">make_gtfs.main.</code><code class="descname">build_stops</code><span class="sig-paren">(</span><em>pfeed</em><span class="sig-paren">)</span><a class="headerlink" href="#make_gtfs.main.build_stops" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a ProtoFeed, return a DataFrame representing <code class="docutils literal notranslate"><span class="pre">stops.txt</span></code>.
Create one stop at the beginning (the first point) of each shape
and one at the end (the last point) of each shape.</p>
<p>Only create stops for shape IDs that are listed in both
<code class="docutils literal notranslate"><span class="pre">frequencies.csv</span></code> and <code class="docutils literal notranslate"><span class="pre">shapes.geojson</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="make_gtfs.main.build_trips">
<code class="descclassname">make_gtfs.main.</code><code class="descname">build_trips</code><span class="sig-paren">(</span><em>pfeed</em>, <em>routes</em>, <em>service_by_window</em>, <em>shapes</em><span class="sig-paren">)</span><a class="headerlink" href="#make_gtfs.main.build_trips" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a ProtoFeed and its corresponding routes (DataFrame),
service-by-window (dictionary), and shapes (DataFrame),
return a DataFrame representing <code class="docutils literal notranslate"><span class="pre">trips.txt</span></code>.
Trip IDs encode route, direction, and service window information
to make it easy to compute stop times later.</p>
<p>Will create <code class="docutils literal notranslate"><span class="pre">calendar</span></code>, <code class="docutils literal notranslate"><span class="pre">routes</span></code>, and <code class="docutils literal notranslate"><span class="pre">shapes</span></code>
if they don’t already exist.</p>
<p>Will not create trips for routes with null linestrings.</p>
</dd></dl>

<dl class="function">
<dt id="make_gtfs.main.get_duration">
<code class="descclassname">make_gtfs.main.</code><code class="descname">get_duration</code><span class="sig-paren">(</span><em>timestr1</em>, <em>timestr2</em>, <em>units='s'</em><span class="sig-paren">)</span><a class="headerlink" href="#make_gtfs.main.get_duration" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the duration of the time period between the first and second
time string in the given units.
Allowable units are ‘s’ (seconds), ‘min’ (minutes), ‘h’ (hours).
Assume <code class="docutils literal notranslate"><span class="pre">timestr1</span> <span class="pre">&lt;</span> <span class="pre">timestr2</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="make_gtfs.main.get_stop_ids">
<code class="descclassname">make_gtfs.main.</code><code class="descname">get_stop_ids</code><span class="sig-paren">(</span><em>shape_id</em><span class="sig-paren">)</span><a class="headerlink" href="#make_gtfs.main.get_stop_ids" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="make_gtfs.main.get_stop_names">
<code class="descclassname">make_gtfs.main.</code><code class="descname">get_stop_names</code><span class="sig-paren">(</span><em>shape_id</em><span class="sig-paren">)</span><a class="headerlink" href="#make_gtfs.main.get_stop_names" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-make_gtfs.cli">
<span id="module-cli"></span><h2>Module cli<a class="headerlink" href="#module-make_gtfs.cli" title="Permalink to this headline">¶</a></h2>
</div>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></li>
<li><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></li>
<li><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="index.html#document-index">make_gtfs 1.0.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014, Alexander Raichev.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.4.
    </div>
  </body>
</html>